{
  "description": "Run DuckLake tests using Postgres as a catalog DBMS.",
  "on_init": "ATTACH 'dbname=ducklakedb' AS pg (TYPE postgres); USE pg; DROP SCHEMA public CASCADE; DROP SCHEMA IF EXISTS metadata_s1 CASCADE; DROP SCHEMA IF EXISTS metadata_s2 CASCADE; CREATE SCHEMA public;USE memory; DETACH pg;",
  "autoloading": "all",
  "statically_loaded_extensions": [
    "core_functions",
    "parquet",
    "ducklake",
    "httpfs",
    "postgres_scanner",
    "icu",
    "httpfs"
  ],
    "test_env": [{
      "env_name":  "DUCKLAKE_CONNECTION",
      "env_value": "postgres:dbname=ducklakedb"
   }],
   "skip_error_messages": [
    "Variant types cannot be inlined in this catalog type yet"
  ],
  "skip_tests": [
    {
      "reason": "Tests only for DuckDB as a catalog",
      "paths": [
        "test/sql/general/missing_parquet.test",
        "test/sql/general/paths.test",
        "test/sql/general/default_path.test",
        "test/sql/autoloading/autoload_data_path.test",
        "test/sql/general/metadata_parameters.test",
        "test/sql/metadata/ducklake_settings.test"
      ]
    },
    {
      "reason": "Modifies connection string",
      "paths": [
        "test/sql/catalog/quoted_identifiers.test",
        "test/sql/stats/count_star_optimization_file_operations.test"
      ]
    },
    {
      "reason": "Migration",
      "paths": [
        "test/sql/migration/v01_partitioned.test",
        "test/sql/migration/v01.test"
      ]
    },
    {
      "reason": "Test only for SQLite as catalog",
      "paths": [
        "test/sql/metadata/ducklake_settings_sqlite.test"
      ]
    },
    {
      "reason": "Postgres Locking (Not a bug, rather PG behavior)",
      "paths": [
        "test/sql/transaction/transaction_conflict_inlining.test"
      ]
    },
    {
      "reason": "Current transaction is aborted",
      "paths": [
        "test/sql/deletion_inlining/test_deletion_inlining_concurrent.test"
      ]
    }
  ]
}