# name: test/sql/types/json_alter_table.test
# description: test storing json in ducklake via an alter table
# group: [types]

require ducklake

require parquet

require json

test-env DUCKLAKE_CONNECTION __TEST_DIR__/{UUID}.db

test-env DATA_PATH __TEST_DIR__

statement ok
ATTACH 'ducklake:${DUCKLAKE_CONNECTION}' AS ducklake (DATA_PATH '${DATA_PATH}/json_alter_table')

statement ok
use ducklake;

statement ok
CREATE TABLE batch_transaction_finished (
    id BIGINT,
    status VARCHAR,
    batch_id VARCHAR
);

statement ok
ALTER TABLE batch_transaction_finished ADD COLUMN validation_errors JSON;
